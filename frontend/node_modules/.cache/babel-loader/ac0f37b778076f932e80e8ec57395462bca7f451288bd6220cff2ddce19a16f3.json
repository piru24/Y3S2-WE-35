{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PIRUTHIVI K\\\\Desktop\\\\food\\\\Y3S2_DS_Project\\\\frontend\\\\src\\\\components\\\\Profile\\\\updatePWD.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport '../../assets/styles/Forms.css';\nimport swal from 'sweetalert';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UpdatePWD = () => {\n  _s();\n  const navigate = useNavigate();\n\n  // User info state\n  const [user, setUser] = useState({\n    name: \"\",\n    mobile: \"\",\n    email: \"\",\n    address: \"\",\n    role: \"\"\n  });\n\n  // Password input state\n  const [password, setPassword] = useState('');\n\n  // Fetch user info on mount\n  useEffect(() => {\n    const getUser = async () => {\n      try {\n        const res = await axios.get(\"http://localhost:8090/User/profile\", {\n          withCredentials: true\n        });\n        setUser({\n          name: res.data.user.name || \"\",\n          mobile: res.data.user.mobile || \"\",\n          email: res.data.user.email || \"\",\n          address: res.data.user.address || \"\",\n          role: res.data.user.role || \"\"\n        });\n      } catch (err) {\n        console.log(err);\n        swal(\"Error fetching user info\", \"\", \"error\");\n      }\n    };\n    getUser();\n  }, []);\n\n  // Handle form submission\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!password) {\n      swal(\"Please enter a new password.\", \"\", \"warning\");\n      return;\n    }\n    try {\n      await axios.patch(\"http://localhost:8090/User/update/pwd\", {\n        password\n      }, {\n        withCredentials: true\n      });\n      swal({\n        title: \"Password updated!\",\n        icon: \"success\",\n        button: \"OK\",\n        timer: 3000\n      });\n      navigate(\"/profile\");\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.log(err);\n      swal(\"Error updating password\", ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"\", \"error\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"forms\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"UPDATE YOUR PASSWORD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputs\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"ENTER YOUR NEW PASSWORD:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputs\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 30\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"User Info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Name: \", user.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Mobile: \", user.mobile]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Email: \", user.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Address: \", user.address]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Role: \", user.role]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n_s(UpdatePWD, \"K66lECGyT8i4EqibA4RbYHemixA=\", false, function () {\n  return [useNavigate];\n});\n_c = UpdatePWD;\nexport default UpdatePWD;\nvar _c;\n$RefreshReg$(_c, \"UpdatePWD\");","map":{"version":3,"names":["React","useState","useEffect","axios","swal","useNavigate","jsxDEV","_jsxDEV","UpdatePWD","_s","navigate","user","setUser","name","mobile","email","address","role","password","setPassword","getUser","res","get","withCredentials","data","err","console","log","handleSubmit","e","preventDefault","patch","title","icon","button","timer","_err$response","_err$response$data","response","message","children","className","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","target","required","style","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/PIRUTHIVI K/Desktop/food/Y3S2_DS_Project/frontend/src/components/Profile/updatePWD.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from \"axios\"\r\nimport '../../assets/styles/Forms.css'\r\nimport swal from 'sweetalert'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst UpdatePWD = () => {\r\n  const navigate = useNavigate();\r\n\r\n  // User info state\r\n  const [user, setUser] = useState({\r\n    name: \"\",\r\n    mobile: \"\",\r\n    email: \"\",\r\n    address: \"\",\r\n    role: \"\"\r\n  });\r\n\r\n  // Password input state\r\n  const [password, setPassword] = useState('');\r\n\r\n  // Fetch user info on mount\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      try {\r\n        const res = await axios.get(\"http://localhost:8090/User/profile\", { withCredentials: true });\r\n        setUser({\r\n          name: res.data.user.name || \"\",\r\n          mobile: res.data.user.mobile || \"\",\r\n          email: res.data.user.email || \"\",\r\n          address: res.data.user.address || \"\",\r\n          role: res.data.user.role || \"\"\r\n        });\r\n      } catch (err) {\r\n        console.log(err);\r\n        swal(\"Error fetching user info\", \"\", \"error\");\r\n      }\r\n    };\r\n    getUser();\r\n  }, []);\r\n\r\n  // Handle form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!password) {\r\n      swal(\"Please enter a new password.\", \"\", \"warning\");\r\n      return;\r\n    }\r\n    try {\r\n      await axios.patch(\r\n        \"http://localhost:8090/User/update/pwd\",\r\n        { password },\r\n        { withCredentials: true }\r\n      );\r\n      swal({\r\n        title: \"Password updated!\",\r\n        icon: \"success\",\r\n        button: \"OK\",\r\n        timer: 3000\r\n      });\r\n      navigate(\"/profile\");\r\n    } catch (err) {\r\n      console.log(err);\r\n      swal(\"Error updating password\", err.response?.data?.message || \"\", \"error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form className='forms' onSubmit={handleSubmit}>\r\n        <h1>UPDATE YOUR PASSWORD</h1>\r\n        <div className='inputs'>\r\n          <label>ENTER YOUR NEW PASSWORD:</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={password}\r\n            onChange={e => setPassword(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div className='inputs'>\r\n          <button type=\"submit\" className=\"btn btn-primary\">Update</button>\r\n        </div>\r\n        <div style={{ marginTop: 30 }}>\r\n          <h2>User Info</h2>\r\n          <h4>Name: {user.name}</h4>\r\n          <h4>Mobile: {user.mobile}</h4>\r\n          <h4>Email: {user.email}</h4>\r\n          <h4>Address: {user.address}</h4>\r\n          <h4>Role: {user.role}</h4>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpdatePWD\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}