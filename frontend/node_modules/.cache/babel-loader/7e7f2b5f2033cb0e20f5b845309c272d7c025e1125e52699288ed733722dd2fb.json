{"ast":null,"code":"var _jsxFileName = \"D:\\\\A SLIIT\\\\A Years\\\\Y3S2\\\\AF\\\\IT22352026\\\\Y3S2-WE-35\\\\frontend\\\\src\\\\components\\\\Profile\\\\updatePWD.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport swal from 'sweetalert';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UpdatePWD = () => {\n  _s();\n  const navigate = useNavigate();\n\n  // State for both passwords\n  const [oldPassword, setOldPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n\n  // (Optional) User info state\n  const [user, setUser] = useState({\n    name: \"\",\n    mobile: \"\",\n    email: \"\",\n    address: \"\",\n    role: \"\"\n  });\n  useEffect(() => {\n    const getUser = async () => {\n      try {\n        const res = await axios.get(\"http://localhost:8090/User/profile\", {\n          withCredentials: true\n        });\n        setUser(res.data.user || {});\n      } catch (err) {\n        console.log(err);\n        swal(\"Error fetching user info\", \"\", \"error\");\n      }\n    };\n    getUser();\n  }, []);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!oldPassword || !newPassword) {\n      swal(\"Both old and new password are required.\", \"\", \"warning\");\n      return;\n    }\n    try {\n      await axios.patch(\"http://localhost:8090/User/update/pwd\", {\n        oldPassword,\n        newPassword\n      }, {\n        withCredentials: true\n      });\n      swal({\n        title: \"Password updated!\",\n        icon: \"success\",\n        button: \"OK\",\n        timer: 3000\n      });\n      navigate(\"/profile\");\n    } catch (err) {\n      var _err$response, _err$response$data;\n      swal(\"Error updating password\", ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"\", \"error\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"forms\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"UPDATE YOUR PASSWORD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputs\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"ENTER YOUR OLD PASSWORD:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"oldPassword\",\n          value: oldPassword,\n          onChange: e => setOldPassword(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputs\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"ENTER YOUR NEW PASSWORD:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"newPassword\",\n          value: newPassword,\n          onChange: e => setNewPassword(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputs\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 30\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"User Info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Name: \", user.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Mobile: \", user.mobile]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Email: \", user.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Address: \", user.address]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Role: \", user.role]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(UpdatePWD, \"8xJyHxG/P/IAtORh5b+ZuR2A/qk=\", false, function () {\n  return [useNavigate];\n});\n_c = UpdatePWD;\nexport default UpdatePWD;\nvar _c;\n$RefreshReg$(_c, \"UpdatePWD\");","map":{"version":3,"names":["React","useState","useEffect","axios","swal","useNavigate","jsxDEV","_jsxDEV","UpdatePWD","_s","navigate","oldPassword","setOldPassword","newPassword","setNewPassword","user","setUser","name","mobile","email","address","role","getUser","res","get","withCredentials","data","err","console","log","handleSubmit","e","preventDefault","patch","title","icon","button","timer","_err$response","_err$response$data","response","message","children","className","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","target","required","style","marginTop","_c","$RefreshReg$"],"sources":["D:/A SLIIT/A Years/Y3S2/AF/IT22352026/Y3S2-WE-35/frontend/src/components/Profile/updatePWD.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from \"axios\"\r\nimport swal from 'sweetalert'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst UpdatePWD = () => {\r\n  const navigate = useNavigate();\r\n\r\n  // State for both passwords\r\n  const [oldPassword, setOldPassword] = useState('');\r\n  const [newPassword, setNewPassword] = useState('');\r\n\r\n  // (Optional) User info state\r\n  const [user, setUser] = useState({ name: \"\", mobile: \"\", email: \"\", address: \"\", role: \"\" });\r\n\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      try {\r\n        const res = await axios.get(\"http://localhost:8090/User/profile\", { withCredentials: true });\r\n        setUser(res.data.user || {});\r\n      } catch (err) {\r\n        console.log(err);\r\n        swal(\"Error fetching user info\", \"\", \"error\");\r\n      }\r\n    };\r\n    getUser();\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!oldPassword || !newPassword) {\r\n      swal(\"Both old and new password are required.\", \"\", \"warning\");\r\n      return;\r\n    }\r\n    try {\r\n      await axios.patch(\r\n        \"http://localhost:8090/User/update/pwd\",\r\n        { oldPassword, newPassword },\r\n        { withCredentials: true }\r\n      );\r\n      swal({\r\n        title: \"Password updated!\",\r\n        icon: \"success\",\r\n        button: \"OK\",\r\n        timer: 3000\r\n      });\r\n      navigate(\"/profile\");\r\n    } catch (err) {\r\n      swal(\"Error updating password\", err.response?.data?.message || \"\", \"error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form className='forms' onSubmit={handleSubmit}>\r\n        <h1>UPDATE YOUR PASSWORD</h1>\r\n        <div className='inputs'>\r\n          <label>ENTER YOUR OLD PASSWORD:</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"oldPassword\"\r\n            value={oldPassword}\r\n            onChange={e => setOldPassword(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div className='inputs'>\r\n          <label>ENTER YOUR NEW PASSWORD:</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"newPassword\"\r\n            value={newPassword}\r\n            onChange={e => setNewPassword(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div className='inputs'>\r\n          <button type=\"submit\" className=\"btn btn-primary\">Update</button>\r\n        </div>\r\n        <div style={{ marginTop: 30 }}>\r\n          <h2>User Info</h2>\r\n          <h4>Name: {user.name}</h4>\r\n          <h4>Mobile: {user.mobile}</h4>\r\n          <h4>Email: {user.email}</h4>\r\n          <h4>Address: {user.address}</h4>\r\n          <h4>Role: {user.role}</h4>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpdatePWD;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,IAAI,MAAM,YAAY;AAC7B,SAASC,WAAW,QAAQ,kBAAkB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtB,MAAMC,QAAQ,GAAGL,WAAW,EAAE;;EAE9B;EACA,MAAM,CAACM,WAAW,EAAEC,cAAc,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACY,WAAW,EAAEC,cAAc,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;;EAElD;EACA,MAAM,CAACc,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC;IAAEgB,IAAI,EAAE,EAAE;IAAEC,MAAM,EAAE,EAAE;IAAEC,KAAK,EAAE,EAAE;IAAEC,OAAO,EAAE,EAAE;IAAEC,IAAI,EAAE;EAAG,CAAC,CAAC;EAE5FnB,SAAS,CAAC,MAAM;IACd,MAAMoB,OAAO,GAAG,MAAAA,CAAA,KAAY;MAC1B,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMpB,KAAK,CAACqB,GAAG,CAAC,oCAAoC,EAAE;UAAEC,eAAe,EAAE;QAAK,CAAC,CAAC;QAC5FT,OAAO,CAACO,GAAG,CAACG,IAAI,CAACX,IAAI,IAAI,CAAC,CAAC,CAAC;MAC9B,CAAC,CAAC,OAAOY,GAAG,EAAE;QACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;QAChBvB,IAAI,CAAC,0BAA0B,EAAE,EAAE,EAAE,OAAO,CAAC;MAC/C;IACF,CAAC;IACDkB,OAAO,EAAE;EACX,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMQ,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,EAAE;IAClB,IAAI,CAACrB,WAAW,IAAI,CAACE,WAAW,EAAE;MAChCT,IAAI,CAAC,yCAAyC,EAAE,EAAE,EAAE,SAAS,CAAC;MAC9D;IACF;IACA,IAAI;MACF,MAAMD,KAAK,CAAC8B,KAAK,CACf,uCAAuC,EACvC;QAAEtB,WAAW;QAAEE;MAAY,CAAC,EAC5B;QAAEY,eAAe,EAAE;MAAK,CAAC,CAC1B;MACDrB,IAAI,CAAC;QACH8B,KAAK,EAAE,mBAAmB;QAC1BC,IAAI,EAAE,SAAS;QACfC,MAAM,EAAE,IAAI;QACZC,KAAK,EAAE;MACT,CAAC,CAAC;MACF3B,QAAQ,CAAC,UAAU,CAAC;IACtB,CAAC,CAAC,OAAOiB,GAAG,EAAE;MAAA,IAAAW,aAAA,EAAAC,kBAAA;MACZnC,IAAI,CAAC,yBAAyB,EAAE,EAAAkC,aAAA,GAAAX,GAAG,CAACa,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcZ,IAAI,cAAAa,kBAAA,uBAAlBA,kBAAA,CAAoBE,OAAO,KAAI,EAAE,EAAE,OAAO,CAAC;IAC7E;EACF,CAAC;EAED,oBACElC,OAAA;IAAAmC,QAAA,eACEnC,OAAA;MAAMoC,SAAS,EAAC,OAAO;MAACC,QAAQ,EAAEd,YAAa;MAAAY,QAAA,gBAC7CnC,OAAA;QAAAmC,QAAA,EAAI;MAAoB;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAK,eAC7BzC,OAAA;QAAKoC,SAAS,EAAC,QAAQ;QAAAD,QAAA,gBACrBnC,OAAA;UAAAmC,QAAA,EAAO;QAAwB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAQ,eACvCzC,OAAA;UACE0C,IAAI,EAAC,UAAU;UACfhC,IAAI,EAAC,aAAa;UAClBiC,KAAK,EAAEvC,WAAY;UACnBwC,QAAQ,EAAEpB,CAAC,IAAInB,cAAc,CAACmB,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE;UAC9CG,QAAQ;QAAA;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QACR;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACE,eACNzC,OAAA;QAAKoC,SAAS,EAAC,QAAQ;QAAAD,QAAA,gBACrBnC,OAAA;UAAAmC,QAAA,EAAO;QAAwB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAQ,eACvCzC,OAAA;UACE0C,IAAI,EAAC,UAAU;UACfhC,IAAI,EAAC,aAAa;UAClBiC,KAAK,EAAErC,WAAY;UACnBsC,QAAQ,EAAEpB,CAAC,IAAIjB,cAAc,CAACiB,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE;UAC9CG,QAAQ;QAAA;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QACR;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACE,eACNzC,OAAA;QAAKoC,SAAS,EAAC,QAAQ;QAAAD,QAAA,eACrBnC,OAAA;UAAQ0C,IAAI,EAAC,QAAQ;UAACN,SAAS,EAAC,iBAAiB;UAAAD,QAAA,EAAC;QAAM;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAS;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAC7D,eACNzC,OAAA;QAAK+C,KAAK,EAAE;UAAEC,SAAS,EAAE;QAAG,CAAE;QAAAb,QAAA,gBAC5BnC,OAAA;UAAAmC,QAAA,EAAI;QAAS;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAK,eAClBzC,OAAA;UAAAmC,QAAA,GAAI,QAAM,EAAC3B,IAAI,CAACE,IAAI;QAAA;UAAA4B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAM,eAC1BzC,OAAA;UAAAmC,QAAA,GAAI,UAAQ,EAAC3B,IAAI,CAACG,MAAM;QAAA;UAAA2B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAM,eAC9BzC,OAAA;UAAAmC,QAAA,GAAI,SAAO,EAAC3B,IAAI,CAACI,KAAK;QAAA;UAAA0B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAM,eAC5BzC,OAAA;UAAAmC,QAAA,GAAI,WAAS,EAAC3B,IAAI,CAACK,OAAO;QAAA;UAAAyB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAM,eAChCzC,OAAA;UAAAmC,QAAA,GAAI,QAAM,EAAC3B,IAAI,CAACM,IAAI;QAAA;UAAAwB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAM;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACtB;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EACD;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACH;AAEV,CAAC;AAACvC,EAAA,CArFID,SAAS;EAAA,QACIH,WAAW;AAAA;AAAAmD,EAAA,GADxBhD,SAAS;AAuFf,eAAeA,SAAS;AAAC,IAAAgD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}